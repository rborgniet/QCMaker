:root{
--bg:#fafafa; 
--fg:#0a0a0a; 
--muted:#6b7280; 
--border:#e5e7eb;
--ok:#16a34a; 
--okbg:#ecfdf5; 
--bad:#dc2626; 
--badbg:#fef2f2; 
--info:#0ea5e9;
--card:#f8fafc; 
--shadow:0 6px 20px rgba(0,0,0,.05); 
--defaultradius:15px;
}
*{ box-sizing:border-box }
html,body{ height:100% }
body { 
  margin:0; 
  background:var(--bg); 
  color:var(--fg); 
  font:16px 
  system-ui,-apple-system,Segoe UI,Roboto,Arial; 
  display:flex; 
  flex-direction:column 
}
.card-error{
  background:#fef2f2; 
  border:1px solid #fecaca; 
  padding:16px; 
  border-radius:12px;
}
.card-error h2{ 
  margin:0 0 6px; 
  font-size:1.1rem; 
  color:#b91c1c }
.card-error .muted{ color:#7f1d1d }
.summary{ margin-top:6px }
.summary .kpis{ display:flex; gap:12px; justify-content:center; margin:10px 0 6px; flex-wrap:wrap }
.summary .kpi{ border:1px solid var(--border); border-radius:var(--defaultradius); padding:10px 14px; min-width:110px; text-align:center; background:#fff; box-shadow:0 4px 12px rgba(0,0,0,.04) }
.summary .kpi strong{ display:block; font-size:1.25rem; line-height:1.2 }
.summary .tip{ text-align:center; margin-top:12px }
.restart-btn{ display:block; margin:18px auto 0; padding:12px 20px; border:1px solid var(--border); border-radius:var(--defaultradius); background:#fff; font-size:1rem; cursor:pointer; transition:box-shadow .15s ease, transform .05s ease }
.restart-btn:hover{ box-shadow:0 6px 18px rgba(0,0,0,.06) }
.restart-btn:active{ transform:translateY(1px) }
.wrap{ margin:32px auto; padding:0 14px; flex:1; justify-content:center }
.topbar{ display:flex; align-items:center; margin-bottom:14px; color:var(--muted); gap: 5px;}
.topbar-left{ display:flex; gap:10px; align-items:center }
.pill{ border-radius:var(--defaultradius); padding:6px 12px; background:#fff }
.pill.hidden{ display:none }
details.menu{ position:relative }
details.menu>summary{
  list-style:none; 
  cursor:pointer; 
  user-select:none;
  border-radius:var(--defaultradius);
  padding:6px 12px; 
  background:#fff;
  display:flex;
}
details.menu[open]>summary{ box-shadow:0 6px 18px rgba(0,0,0,.06) }
details.menu .panel{
position:absolute; margin-top:12px; z-index:50;
min-inline-size:320px; background:#fff; border:1px solid var(--border);
border-radius:var(--defaultradius); box-shadow:0 12px 28px rgba(0,0,0,.08); padding:10px 10px;
}
.row-setting{ display:flex; align-items:center; justify-content:space-between; gap:12px; padding:8px 8px; border-radius:10px }
.row-setting:hover{ background:#f8fafc }
.row-setting small{ color:var(--muted) }
.menu-btn{
width:100%;
padding:10px 12px;
border:1px solid var(--border);
border-radius:var(--defaultradius);
background:#fff;
cursor:pointer;
text-align:center;
transition:box-shadow .15s ease, transform .05s ease, background .15s ease;
}
.menu-btn:hover{ box-shadow:0 6px 18px rgba(0,0,0,.06) }
.menu-btn:active{ transform:translateY(1px) }
.menu-btn.danger{ border-color:#fecaca; background:#fff5f5 }
.menu-btn.default{ border-color: none; background:#ffffff }
.switch{ inline-size:44px; block-size:24px; background:#e5e7eb; border-radius:999px; position:relative; transition:background .2s ease; cursor:pointer }
.switch::after{ content:""; position:absolute; top:2px; left:2px; inline-size:20px; block-size:20px; background:#fff; border-radius:50%; box-shadow:0 1px 2px rgba(0,0,0,.12); transition:transform .2s ease; }
.switch.on{ background:#34d399 }
.switch.on::after{ transform:translateX(20px) }
.card{ background:#fff; border:none; border-radius:var(--defaultradius); padding:45px; box-shadow:var(--shadow); inline-size:clamp(320px,92vw,820px); display:flex; flex-direction:column; justify-content:center; transition:min-height .3s ease; margin:0 auto }
.progress{ display:flex; gap:10px; align-items:center; color:var(--muted); margin-bottom:8px }
.meter{ position:relative; height:8px; background:#f1f5f9; border-radius:var(--defaultradius); overflow:hidden; flex:1 }
.meter>i{ display:block; height:100%; width:0%; background:#00ff0d; opacity:.4; transition:width .25s ease }
.q{ font-weight:800; font-size:1.45rem; line-height:1.25; margin:20px 0 40px; width:100%; text-align:center}
.opts{ display:grid; gap:10px; width:100%; grid-template-columns:1fr; }
.choice{ display:grid; width:100%; grid-template-columns:auto 1fr; gap:12px; align-items:center; border:1px solid var(--border); border-radius:var(--defaultradius); background:#fff; cursor:pointer; transition:transform .05s ease, box-shadow .15s ease, border-color .15s ease, background .15s ease }
.choice:hover{ box-shadow:0 8px 26px rgba(0,0,0,.06) }
.choice:active{ transform:translateY(0) scale(.997) }
.choice[disabled]{ pointer-events:none; opacity:.95 }
.badge{ width:34px; height:34px; display:grid; place-items:center; border-radius:var(--defaultradius); border:1px solid var(--border); background:transparent; color: var(--fg); }
.label{ font-size:1rem; word-break:break-word; text-align:left; color: var(--fg); }
.choice.correct{ border-color:var(--ok); background:var(--okbg) }
.choice.wrong{ border-color:var(--bad); background:var(--badbg) }
.choice.picked{ outline:2px dashed #cbd5e1 } /* pour mode fin-seule: montrer qu'une option a été choisie */
.why{ margin-top:14px; padding:12px 14px; background:#f0f9ff; border-radius:var(--defaultradius); display:none; width:100%; font-style:italic; font-weight:200 }
.row{ display:none; gap:10px; justify-content:space-between; margin-top:20px; align-items:center; width:100% }
.row .spacer{ flex:1 }
button{ font:inherit; border:1px solid var(--border); background:#fff; border-radius:var(--defaultradius); padding:10px 14px; cursor:pointer; transition:box-shadow .15s ease, transform .05s ease; color:var(--fg); }
button:hover{ box-shadow:0 6px 18px rgba(0,0,0,.06) }
button:active{ transform:translateY(1px) }
.muted{ color:var(--muted) }
.err{ color:#b91c1c }
#next{ color: var(--fg); }
footer{ text-align:center; padding:14px; color:var(--muted); font-size:12px }
.divider{border:none;border-top:1px solid var(--border);margin:8px 0}
.timer{ color:red; }
.result-badge{ display:inline-block; margin-left:10px; padding:6px 20px; border-radius:999px; font-weight:600; vertical-align:middle }
.result-pass{ color:var(--ok); background:var(--okbg) }
.result-fail{ color:var(--bad); background:var(--badbg) }

@media (max-width:600px){
  .card{ padding:24px }
  .badge{ width:30px; height:30px }
  .q{ font-size:1.25rem; margin:16px 0 28px }
}